{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import API from'../../services/api';// Get user from localStorage\nconst user=JSON.parse(localStorage.getItem('user'));const initialState={user:user?user:null,isLoading:false,isError:false,isSuccess:false,message:''};// Register user\nexport const register=createAsyncThunk('auth/register',async(userData,thunkAPI)=>{try{const response=await API.post('/auth/register',userData);if(response.data){localStorage.setItem('user',JSON.stringify(response.data));}return response.data;}catch(error){var _error$response,_error$response$data;const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||error.toString();return thunkAPI.rejectWithValue(message);}});// Login user\nexport const login=createAsyncThunk('auth/login',async(userData,thunkAPI)=>{try{const response=await API.post('/auth/login',userData);if(response.data){localStorage.setItem('user',JSON.stringify(response.data));}return response.data;}catch(error){var _error$response2,_error$response2$data;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||error.toString();return thunkAPI.rejectWithValue(message);}});// Logout user\nexport const logout=createAsyncThunk('auth/logout',async()=>{localStorage.removeItem('user');});// Forgot password\nexport const forgotPassword=createAsyncThunk('auth/forgotPassword',async(email,thunkAPI)=>{try{const response=await API.post('/auth/forgot-password',{email});return response.data;}catch(error){var _error$response3,_error$response3$data;const message=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message||error.toString();return thunkAPI.rejectWithValue(message);}});export const authSlice=createSlice({name:'auth',initialState,reducers:{reset:state=>{state.isLoading=false;state.isError=false;state.isSuccess=false;state.message='';}},extraReducers:builder=>{builder.addCase(register.pending,state=>{state.isLoading=true;}).addCase(register.fulfilled,(state,action)=>{state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(register.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(login.pending,state=>{state.isLoading=true;}).addCase(login.fulfilled,(state,action)=>{state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(login.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(logout.fulfilled,state=>{state.user=null;}).addCase(forgotPassword.pending,state=>{state.isLoading=true;}).addCase(forgotPassword.fulfilled,state=>{state.isLoading=false;state.isSuccess=true;}).addCase(forgotPassword.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.message=action.payload;});}});export const{reset}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","API","user","JSON","parse","localStorage","getItem","initialState","isLoading","isError","isSuccess","message","register","userData","thunkAPI","response","post","data","setItem","stringify","error","_error$response","_error$response$data","toString","rejectWithValue","login","_error$response2","_error$response2$data","logout","removeItem","forgotPassword","email","_error$response3","_error$response3$data","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/Jaydeep/portal/frontend/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport API from '../../services/api';\r\n\r\n// Get user from localStorage\r\nconst user = JSON.parse(localStorage.getItem('user'));\r\n\r\nconst initialState = {\r\n  user: user ? user : null,\r\n  isLoading: false,\r\n  isError: false,\r\n  isSuccess: false,\r\n  message: ''\r\n};\r\n\r\n// Register user\r\nexport const register = createAsyncThunk(\r\n  'auth/register',\r\n  async (userData, thunkAPI) => {\r\n    try {\r\n      const response = await API.post('/auth/register', userData);\r\n      if (response.data) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      return response.data;\r\n    } catch (error) {\r\n      const message = error.response?.data?.message || error.message || error.toString();\r\n      return thunkAPI.rejectWithValue(message);\r\n    }\r\n  }\r\n);\r\n\r\n// Login user\r\nexport const login = createAsyncThunk(\r\n  'auth/login',\r\n  async (userData, thunkAPI) => {\r\n    try {\r\n      const response = await API.post('/auth/login', userData);\r\n      if (response.data) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      return response.data;\r\n    } catch (error) {\r\n      const message = error.response?.data?.message || error.message || error.toString();\r\n      return thunkAPI.rejectWithValue(message);\r\n    }\r\n  }\r\n);\r\n\r\n// Logout user\r\nexport const logout = createAsyncThunk('auth/logout', async () => {\r\n  localStorage.removeItem('user');\r\n});\r\n\r\n// Forgot password\r\nexport const forgotPassword = createAsyncThunk(\r\n  'auth/forgotPassword',\r\n  async (email, thunkAPI) => {\r\n    try {\r\n      const response = await API.post('/auth/forgot-password', { email });\r\n      return response.data;\r\n    } catch (error) {\r\n      const message = error.response?.data?.message || error.message || error.toString();\r\n      return thunkAPI.rejectWithValue(message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    reset: (state) => {\r\n      state.isLoading = false;\r\n      state.isError = false;\r\n      state.isSuccess = false;\r\n      state.message = '';\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(register.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(register.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.user = action.payload;\r\n      })\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.message = action.payload;\r\n        state.user = null;\r\n      })\r\n      .addCase(login.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(login.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.user = action.payload;\r\n      })\r\n      .addCase(login.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.message = action.payload;\r\n        state.user = null;\r\n      })\r\n      .addCase(logout.fulfilled, (state) => {\r\n        state.user = null;\r\n      })\r\n      .addCase(forgotPassword.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(forgotPassword.fulfilled, (state) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n      })\r\n      .addCase(forgotPassword.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.message = action.payload;\r\n      });\r\n  }\r\n});\r\n\r\nexport const { reset } = authSlice.actions;\r\nexport default authSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}